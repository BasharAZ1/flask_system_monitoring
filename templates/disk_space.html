<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>

<div class="w3-container">
  <br>
  <form>
    <div style="display: flex; justify-content: flex-end;">
      <input type="button" value="&#8962; Home" onclick="history.back()" class="btn">
    </div>
  </form>

  <h2>Disk Space</h2>

  <p> Total Space: {{total_space}}</p>

  <table class="w3-table-all w3-hoverable">
    <thead>
      <tr class="w3-light-grey">
        <th>id</th>
        <th>measurement_time</th>
        <th>used</th>
        <th>free</th>
        <th>usage_percent</th>

      </tr>
    </thead>
  {% for cur_disk in disk_list %}
    <tr>
      <td>{{cur_disk.id}}</td>
      <td>{{cur_disk.measurement_time}}</td>
      <td>{{cur_disk.used}}</td>
      <td>{{cur_disk.free}}</td>
      <td>{{cur_disk.usage_percent}}</td>
    </tr>
  {% endfor %}
  </table>
</div>
<script>
  function fetchDiskData() {
      fetch('/disk_data')
          .then(response => response.json())
          .then(data => {
              const list = data.map(disk =>
                  `<li>Time: ${disk.measurement_time}, Used: ${disk.used}, Free: ${disk.free}, Usage: ${disk.usage_percent}%</li>`
              ).join('');
              document.getElementById('dynamic-disk-info').innerHTML = `<ul>${list}</ul>`;
          })
          .catch(error => console.error('Error fetching disk data:', error));
  }

  // Fetch disk data every 60 seconds
  setInterval(fetchDiskData, 60000);

  // Fetch data on initial load
  fetchDiskData();
  </script>

</body>
</html>